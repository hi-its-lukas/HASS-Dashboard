You are a senior Docker / Linux / Node.js engineer.

The app uses a Docker volume mounted at /data to persist an encryption key.
Currently the container crashes with:

"can't create /data/.encryption_key: Permission denied"

This happens when the host volume has restrictive permissions.

TASKS

1) Make docker-entrypoint.sh robust and production-safe

Update docker-entrypoint.sh so that:
- /data is always created if missing
- The encryption key file is created safely
- The script NEVER crashes due to permission errors
- Clear log output explains what is happening

Required behavior:
- If /data is not writable, log a clear warning
- If possible, attempt to fix permissions automatically
- If permissions cannot be fixed, exit with a clear error message ONCE
  (no infinite restart loops)

2) Preferred permission strategy (choose best practice)

Implement ONE of the following (your choice, best practice preferred):
A) Start as root → fix /data permissions → drop to app user
B) Use an init step inside entrypoint that ensures correct ownership
C) Gracefully fallback to an in-memory key if /data is not writable
   (with a clear security warning in logs)

3) Dockerfile alignment

Ensure Dockerfile and entrypoint are consistent:
- USER instruction matches expected UID/GID
- No silent permission mismatch
- Explicit comments explaining why this approach is safe

4) docker-compose compatibility

Ensure this works with:
- Default docker-compose.yml
- No manual chown required on host
- No additional env variables
- Raspberry Pi (ARM64) compatibility

5) Logging & developer experience

Add clear log messages like:
- "[INIT] Creating /data directory"
- "[INIT] Generating encryption key"
- "[WARN] /data not writable, attempting recovery"
- "[FATAL] /data is not writable, cannot continue"

6) Documentation

Update README.md:
- Explain how /data is used
- Clarify that manual permission fixes are normally NOT required
- Add a short troubleshooting section for permissions

CONSTRAINTS
- Do NOT introduce breaking changes
- Do NOT remove encryption or persistence
- Do NOT require .env or manual host configuration
- Keep changes minimal, readable, and well-commented

DELIVERABLES
- Updated docker-entrypoint.sh
- Any required Dockerfile changes
- README.md updates
- Confirmation that:
  `docker compose up -d --build` works on a fresh system
