exports.id=854,exports.ids=[854],exports.modules={2638:(t,e,a)=>{Promise.resolve().then(a.bind(a,2805)),Promise.resolve().then(a.bind(a,5975))},229:(t,e,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},2805:(t,e,a)=>{"use strict";a.d(e,{BottomNav:()=>m});var n=a(326),i=a(434),r=a(5047),s=a(5920),o=a(9758),l=a(7358),d=a(8038),c=a(748),_=a(9622),h=a(7863);let g=[{href:"/",icon:s.Z,label:"HOME"},{href:"/cams",icon:o.Z,label:"CAMS"},{href:"/calendar",icon:l.Z,label:"CALENDAR"},{href:"/secure",icon:d.Z,label:"SECURE"},{href:"/more",icon:c.Z,label:"MORE"}];function m(){let t=(0,r.usePathname)(),e=e=>"/"===e?"/"===t:t.startsWith(e);return n.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-bg-primary/90 backdrop-blur-lg border-t border-gray-800/50 safe-bottom",children:n.jsx("div",{className:"max-w-lg mx-auto flex items-center justify-around py-2 px-4",children:g.map(({href:t,icon:a,label:r})=>{let s=e(t);return(0,n.jsxs)(i.default,{href:t,className:(0,h.cn)("flex flex-col items-center gap-1 px-3 py-2 rounded-xl transition-all",s?"nav-active":"text-text-muted hover:text-text-secondary"),children:[(0,n.jsxs)(_.E.div,{whileTap:{scale:.9},className:"relative",children:[n.jsx(a,{className:"w-6 h-6",strokeWidth:s?2.5:2}),s&&n.jsx(_.E.div,{layoutId:"nav-glow",className:"absolute -inset-2 bg-accent-cyan/20 rounded-full blur-md -z-10",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]}),n.jsx("span",{className:"text-[10px] font-medium tracking-wide",children:r})]},t)})})})}},5975:(t,e,a)=>{"use strict";a.d(e,{HAProvider:()=>r});var n=a(326);a(7577);var i=a(760);function r({children:t}){return(0,i.E8)(t=>t.connect),n.jsx(n.Fragment,{children:t})}},8278:(t,e,a)=>{"use strict";a.d(e,{dashboardConfig:()=>n});let n={weatherEntityId:"weather.home",lightsGroupEntityId:"group.all_lights",powerEntityId:"sensor.power_consumption",energy:{solarEntityId:"sensor.solar_power",batteryEntityId:"sensor.battery_power",batteryLevelEntityId:"sensor.battery_level",gridEntityId:"sensor.grid_power",houseEntityId:"sensor.house_power"},security:{alarmEntityId:"alarm_control_panel.home_alarm",zones:[{id:"kitchen",name:"Kitchen",entityId:"binary_sensor.kitchen_motion"},{id:"living",name:"Living Room",entityId:"binary_sensor.living_motion"},{id:"entry",name:"Entry",entityId:"binary_sensor.entry_door"}],dogModeEntityId:"input_boolean.dog_mode"},rooms:[{id:"kitchen",name:"Kitchen",floor:"ground",icon:"utensils",entityIds:["light.kitchen_main","light.kitchen_counter","switch.kitchen_hood"]},{id:"living_room",name:"Living Room",floor:"ground",icon:"sofa",entityIds:["light.living_room_main","light.living_room_lamp","switch.tv_power"]},{id:"entry",name:"Entry",floor:"ground",icon:"door-open",entityIds:["light.entry","lock.front_door"]},{id:"hallway",name:"Hallway",floor:"ground",icon:"layout",entityIds:["light.hallway"]},{id:"garage",name:"Garage",floor:"ground",icon:"warehouse",entityIds:["light.garage","cover.garage_door"]},{id:"main_bedroom",name:"Main Bedroom",floor:"upper",icon:"home",entityIds:["light.bedroom_main","light.bedroom_lamp","fan.bedroom"]},{id:"alexandras_room",name:"Alexandra's Room",floor:"upper",icon:"star",entityIds:["light.alexandra_room"]},{id:"milas_room",name:"Mila's Room",floor:"upper",icon:"heart",entityIds:["light.mila_room"]},{id:"upstairs_hall",name:"Upstairs Hall",floor:"upper",icon:"layout",entityIds:["light.upstairs_hall"]}],persons:[{id:"tatiana",name:"Tatiana",entityId:"person.tatiana",avatarUrl:"/avatars/tatiana.jpg",batteryEntityId:"sensor.tatiana_phone_battery",stepsEntityId:"sensor.tatiana_steps",distanceEntityId:"sensor.tatiana_distance",floorsEntityId:"sensor.tatiana_floors",activityEntityId:"sensor.tatiana_activity"},{id:"nico",name:"Nico",entityId:"person.nico",avatarUrl:"/avatars/nico.jpg",batteryEntityId:"sensor.nico_phone_battery",stepsEntityId:"sensor.nico_steps",distanceEntityId:"sensor.nico_distance",floorsEntityId:"sensor.nico_floors",activityEntityId:"sensor.nico_activity"},{id:"alexandra",name:"Alexandra",entityId:"person.alexandra",avatarUrl:"/avatars/alexandra.jpg",batteryEntityId:"sensor.alexandra_phone_battery",stepsEntityId:"sensor.alexandra_steps",distanceEntityId:"sensor.alexandra_distance",floorsEntityId:"sensor.alexandra_floors",activityEntityId:"sensor.alexandra_activity"},{id:"mila",name:"Mila",entityId:"person.mila",avatarUrl:"/avatars/mila.jpg",batteryEntityId:"sensor.mila_phone_battery",stepsEntityId:"sensor.mila_steps",distanceEntityId:"sensor.mila_distance",floorsEntityId:"sensor.mila_floors",activityEntityId:"sensor.mila_activity"}],appliances:[{id:"geyser",name:"Geyser",entityId:"switch.geyser",icon:"flame"},{id:"washer",name:"Washer",entityId:"switch.washer",icon:"loader"},{id:"dryer",name:"Dryer",entityId:"switch.dryer",icon:"wind"},{id:"dishwasher",name:"Dishwasher",entityId:"switch.dishwasher",icon:"droplets"}]}},760:(t,e,a)=>{"use strict";a.d(e,{t9:()=>p,pX:()=>h,TC:()=>f,E8:()=>_,uM:()=>m,C5:()=>S,TO:()=>u,cZ:()=>b,XW:()=>w,l8:()=>D,Ry:()=>I,GE:()=>y});var n=a(114);class i{constructor(t,e){this.ws=null,this.messageId=1,this.pendingRequests=new Map,this.stateChangeCallbacks=[],this.reconnectAttempts=0,this.maxReconnectAttempts=10,this.reconnectDelay=1e3,this.heartbeatInterval=null,this.isAuthenticated=!1,this.url=t,this.getToken=e}async connect(){return new Promise((t,e)=>{try{this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("[HA WS] Connected"),this.reconnectAttempts=0,this.startHeartbeat()},this.ws.onmessage=async a=>{try{let n=JSON.parse(a.data);await this.handleMessage(n,t,e)}catch(t){console.error("[HA WS] Failed to parse message:",t)}},this.ws.onerror=t=>{console.error("[HA WS] Error:",t),e(Error("WebSocket error"))},this.ws.onclose=()=>{console.log("[HA WS] Disconnected"),this.isAuthenticated=!1,this.stopHeartbeat(),this.handleReconnect()}}catch(t){e(t instanceof Error?t:Error("Connection failed"))}})}async handleMessage(t,e,a){if("type"in t)switch(t.type){case"auth_required":let n=await this.getToken();this.send({type:"auth",access_token:n});break;case"auth_ok":console.log("[HA WS] Authenticated"),this.isAuthenticated=!0,e?.();break;case"auth_invalid":console.error("[HA WS] Authentication failed"),this.isAuthenticated=!1,a?.(Error("Authentication failed"));break;case"result":let i=this.pendingRequests.get(t.id);i&&(t.success?i.resolve(t.result):i.reject(Error(t.error?.message||"Unknown error")),this.pendingRequests.delete(t.id));break;case"event":let{entity_id:r,new_state:s,old_state:o}=t.event.data;r&&s&&this.stateChangeCallbacks.forEach(t=>t(r,s,o||null))}}send(t){this.ws?.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}sendCommand(t){return new Promise((e,a)=>{let n=this.messageId++;this.pendingRequests.set(n,{resolve:t=>e(t),reject:a}),this.send({...t,id:n}),setTimeout(()=>{this.pendingRequests.has(n)&&(this.pendingRequests.delete(n),a(Error("Request timeout")))},3e4)})}async getStates(){return this.sendCommand({type:"get_states"})}async subscribeToStateChanges(){await this.sendCommand({type:"subscribe_events",event_type:"state_changed"})}async callService(t){await this.sendCommand({type:"call_service",domain:t.domain,service:t.service,service_data:t.serviceData,target:t.target})}onStateChange(t){return this.stateChangeCallbacks.push(t),()=>{this.stateChangeCallbacks=this.stateChangeCallbacks.filter(e=>e!==t)}}startHeartbeat(){this.stopHeartbeat(),this.heartbeatInterval=setInterval(()=>{this.ws?.readyState===WebSocket.OPEN&&this.send({type:"ping"})},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}handleReconnect(){if(this.reconnectAttempts<this.maxReconnectAttempts){this.reconnectAttempts++;let t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`[HA WS] Reconnecting in ${t}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>this.connect(),t)}else console.error("[HA WS] Max reconnection attempts reached")}disconnect(){this.stopHeartbeat(),this.ws&&(this.ws.close(),this.ws=null)}get connected(){return this.ws?.readyState===WebSocket.OPEN&&this.isAuthenticated}}let r={"weather.home":{entity_id:"weather.home",state:"sunny",attributes:{temperature:31,humidity:45,friendly_name:"Home"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"group.all_lights":{entity_id:"group.all_lights",state:"on",attributes:{entity_id:["light.kitchen_main","light.kitchen_counter","light.living_room_main","light.living_room_lamp","light.entry","light.hallway","light.garage","light.bedroom_main","light.bedroom_lamp","light.alexandra_room","light.mila_room","light.upstairs_hall"],friendly_name:"All Lights"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.kitchen_main":{entity_id:"light.kitchen_main",state:"off",attributes:{friendly_name:"Kitchen Main",brightness:0},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.kitchen_counter":{entity_id:"light.kitchen_counter",state:"off",attributes:{friendly_name:"Kitchen Counter",brightness:0},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.living_room_main":{entity_id:"light.living_room_main",state:"on",attributes:{friendly_name:"Living Room Main",brightness:200},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.living_room_lamp":{entity_id:"light.living_room_lamp",state:"off",attributes:{friendly_name:"Living Room Lamp",brightness:0},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.entry":{entity_id:"light.entry",state:"off",attributes:{friendly_name:"Entry",brightness:0},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.hallway":{entity_id:"light.hallway",state:"off",attributes:{friendly_name:"Hallway",brightness:0},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.garage":{entity_id:"light.garage",state:"on",attributes:{friendly_name:"Garage",brightness:255},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.bedroom_main":{entity_id:"light.bedroom_main",state:"on",attributes:{friendly_name:"Main Bedroom",brightness:150},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.bedroom_lamp":{entity_id:"light.bedroom_lamp",state:"on",attributes:{friendly_name:"Bedroom Lamp",brightness:100},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.alexandra_room":{entity_id:"light.alexandra_room",state:"off",attributes:{friendly_name:"Alexandra's Room",brightness:0},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.mila_room":{entity_id:"light.mila_room",state:"off",attributes:{friendly_name:"Mila's Room",brightness:0},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"light.upstairs_hall":{entity_id:"light.upstairs_hall",state:"off",attributes:{friendly_name:"Upstairs Hall",brightness:0},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.power_consumption":{entity_id:"sensor.power_consumption",state:"696",attributes:{friendly_name:"Power Consumption",unit_of_measurement:"W"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.solar_power":{entity_id:"sensor.solar_power",state:"20",attributes:{friendly_name:"Solar Power",unit_of_measurement:"W"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.battery_power":{entity_id:"sensor.battery_power",state:"150",attributes:{friendly_name:"Battery Power",unit_of_measurement:"W"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.battery_level":{entity_id:"sensor.battery_level",state:"90",attributes:{friendly_name:"Battery Level",unit_of_measurement:"%"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.grid_power":{entity_id:"sensor.grid_power",state:"736",attributes:{friendly_name:"Grid Power",unit_of_measurement:"W"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.house_power":{entity_id:"sensor.house_power",state:"702",attributes:{friendly_name:"House Power",unit_of_measurement:"W"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"alarm_control_panel.home_alarm":{entity_id:"alarm_control_panel.home_alarm",state:"disarmed",attributes:{friendly_name:"Home Alarm",code_format:"number",changed_by:"User",code_arm_required:!0},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"binary_sensor.kitchen_motion":{entity_id:"binary_sensor.kitchen_motion",state:"on",attributes:{friendly_name:"Kitchen Motion",device_class:"motion"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"binary_sensor.living_motion":{entity_id:"binary_sensor.living_motion",state:"off",attributes:{friendly_name:"Living Room Motion",device_class:"motion"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"binary_sensor.entry_door":{entity_id:"binary_sensor.entry_door",state:"off",attributes:{friendly_name:"Entry Door",device_class:"door"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"input_boolean.dog_mode":{entity_id:"input_boolean.dog_mode",state:"off",attributes:{friendly_name:"Dog Mode"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"person.tatiana":{entity_id:"person.tatiana",state:"home",attributes:{friendly_name:"Tatiana",source:"device_tracker.tatiana_phone"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"person.nico":{entity_id:"person.nico",state:"home",attributes:{friendly_name:"Nico",source:"device_tracker.nico_phone"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"person.alexandra":{entity_id:"person.alexandra",state:"home",attributes:{friendly_name:"Alexandra",source:"device_tracker.alexandra_phone"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"person.mila":{entity_id:"person.mila",state:"home",attributes:{friendly_name:"Mila",source:"device_tracker.mila_phone"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.tatiana_phone_battery":{entity_id:"sensor.tatiana_phone_battery",state:"50",attributes:{friendly_name:"Tatiana Phone Battery",unit_of_measurement:"%"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.nico_phone_battery":{entity_id:"sensor.nico_phone_battery",state:"50",attributes:{friendly_name:"Nico Phone Battery",unit_of_measurement:"%"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.alexandra_phone_battery":{entity_id:"sensor.alexandra_phone_battery",state:"45",attributes:{friendly_name:"Alexandra Phone Battery",unit_of_measurement:"%"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.mila_phone_battery":{entity_id:"sensor.mila_phone_battery",state:"25",attributes:{friendly_name:"Mila Phone Battery",unit_of_measurement:"%"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.tatiana_steps":{entity_id:"sensor.tatiana_steps",state:"884",attributes:{friendly_name:"Tatiana Steps",unit_of_measurement:"steps"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.tatiana_distance":{entity_id:"sensor.tatiana_distance",state:"0.6",attributes:{friendly_name:"Tatiana Distance",unit_of_measurement:"km"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.tatiana_floors":{entity_id:"sensor.tatiana_floors",state:"4",attributes:{friendly_name:"Tatiana Floors"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.tatiana_activity":{entity_id:"sensor.tatiana_activity",state:"walking",attributes:{friendly_name:"Tatiana Activity"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.nico_steps":{entity_id:"sensor.nico_steps",state:"1448",attributes:{friendly_name:"Nico Steps",unit_of_measurement:"steps"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.nico_distance":{entity_id:"sensor.nico_distance",state:"1.0",attributes:{friendly_name:"Nico Distance",unit_of_measurement:"km"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.nico_floors":{entity_id:"sensor.nico_floors",state:"4",attributes:{friendly_name:"Nico Floors"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.nico_activity":{entity_id:"sensor.nico_activity",state:"driving",attributes:{friendly_name:"Nico Activity"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.alexandra_steps":{entity_id:"sensor.alexandra_steps",state:"765",attributes:{friendly_name:"Alexandra Steps",unit_of_measurement:"steps"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.alexandra_distance":{entity_id:"sensor.alexandra_distance",state:"0.5",attributes:{friendly_name:"Alexandra Distance",unit_of_measurement:"km"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.alexandra_floors":{entity_id:"sensor.alexandra_floors",state:"4",attributes:{friendly_name:"Alexandra Floors"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.alexandra_activity":{entity_id:"sensor.alexandra_activity",state:"stationary",attributes:{friendly_name:"Alexandra Activity"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.mila_steps":{entity_id:"sensor.mila_steps",state:"793",attributes:{friendly_name:"Mila Steps",unit_of_measurement:"steps"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.mila_distance":{entity_id:"sensor.mila_distance",state:"0.4",attributes:{friendly_name:"Mila Distance",unit_of_measurement:"km"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.mila_floors":{entity_id:"sensor.mila_floors",state:"3",attributes:{friendly_name:"Mila Floors"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"sensor.mila_activity":{entity_id:"sensor.mila_activity",state:"stationary",attributes:{friendly_name:"Mila Activity"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"switch.geyser":{entity_id:"switch.geyser",state:"on",attributes:{friendly_name:"Geyser"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"switch.washer":{entity_id:"switch.washer",state:"off",attributes:{friendly_name:"Washer"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"switch.dryer":{entity_id:"switch.dryer",state:"off",attributes:{friendly_name:"Dryer"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()},"switch.dishwasher":{entity_id:"switch.dishwasher",state:"off",attributes:{friendly_name:"Dishwasher"},last_changed:new Date().toISOString(),last_updated:new Date().toISOString()}};function s(){let t=[],e=Date.now();for(let a=360;a>=0;a-=10){let n=new Date(e-6e4*a),i=500+200*Math.sin(a/60),r=100*Math.random()-50;t.push({time:n.toISOString(),value:Math.round(Math.max(0,i+r)),avg:Math.round(i)})}return t}let o=[{id:"1",timestamp:new Date(Date.now()-12e4).toISOString(),camera:"Garage",type:"vehicle",label:"CAR",confidence:85,thumbnailUrl:"/thumbnails/garage.jpg"},{id:"2",timestamp:new Date(Date.now()-114e4).toISOString(),camera:"Backyard",type:"animal",label:"DOG",confidence:83,thumbnailUrl:"/thumbnails/backyard.jpg"},{id:"3",timestamp:new Date(Date.now()-132e4).toISOString(),camera:"Indoor",type:"person",label:"PERSON",confidence:84,thumbnailUrl:"/thumbnails/indoor.jpg"},{id:"4",timestamp:new Date(Date.now()-132e4).toISOString(),camera:"Indoor",type:"person",label:"PERSON",confidence:85,thumbnailUrl:"/thumbnails/indoor2.jpg"},{id:"5",timestamp:new Date(Date.now()-18e5).toISOString(),camera:"Front Door",type:"person",label:"PERSON",confidence:93,thumbnailUrl:"/thumbnails/front.jpg"}],l={events:50,people:32,vehicles:5,ai:48};var d=a(8278);let c=null,_=(0,n.Ue)((t,e)=>({connected:!1,connecting:!1,error:null,useMock:!0,states:{},powerTrend:[],surveillanceEvents:[],surveillanceStats:{events:0,people:0,vehicles:0,ai:0},connect:async()=>{let{useMock:a,connecting:n,connected:d}=e();if(!n&&!d){if(t({connecting:!0,error:null}),a){t({connected:!0,connecting:!1,states:r,powerTrend:s(),surveillanceEvents:o,surveillanceStats:l});return}try{let e=process.env.NEXT_PUBLIC_HA_WS_URL;if(!e)throw Error("NEXT_PUBLIC_HA_WS_URL not configured");c=new i(e,async()=>{let t=await fetch("/api/ha/token");if(!t.ok)throw Error("Failed to get token");let{token:e}=await t.json();return e}),await c.connect();let a=await c.getStates(),n={};a.forEach(t=>{n[t.entity_id]=t}),await c.subscribeToStateChanges(),c.onStateChange((e,a)=>{t(t=>({states:{...t.states,[e]:a}}))}),t({connected:!0,connecting:!1,states:n,powerTrend:s(),surveillanceEvents:o,surveillanceStats:l})}catch(e){console.error("[HA Store] Connection error:",e),t({connected:!1,connecting:!1,error:e instanceof Error?e.message:"Connection failed"})}}},disconnect:()=>{c&&(c.disconnect(),c=null),t({connected:!1,connecting:!1})},getState:t=>e().states[t],callService:async(a,n,i,r)=>{let{useMock:s}=e();if(s){if(i){let r=e().states[i];if(r){let e=r.state;"turn_on"===n&&(e="on"),"turn_off"===n&&(e="off"),"toggle"===n&&(e="on"===r.state?"off":"on"),"alarm_control_panel"===a&&("alarm_disarm"===n&&(e="disarmed"),"alarm_arm_home"===n&&(e="armed_home"),"alarm_arm_away"===n&&(e="armed_away"),"alarm_arm_night"===n&&(e="armed_night")),t(t=>({states:{...t.states,[i]:{...r,state:e,last_changed:new Date().toISOString(),last_updated:new Date().toISOString()}}}))}}return}c&&await c.callService({domain:a,service:n,serviceData:r,target:i?{entity_id:i}:void 0})},updateState:(e,a)=>{t(t=>({states:{...t.states,[e]:a}}))}})),h=()=>_(t=>({connected:t.connected,connecting:t.connecting,error:t.error})),g=t=>_(e=>e.states[t]),m=()=>{let t=g(d.dashboardConfig.lightsGroupEntityId),e=_(t=>t.states);if(!t)return{on:0,total:0};let a=t.attributes?.entity_id,n=Array.isArray(a)?a:[];return{on:n.filter(t=>e[t]?.state==="on").length,total:n.length}},u=()=>{let t=g(d.dashboardConfig.powerEntityId);return t&&parseInt(t.state)||0},y=()=>{let t=g(d.dashboardConfig.weatherEntityId);if(!t)return{temperature:0,condition:"unknown"};let e=t.attributes?.temperature;return{temperature:"number"==typeof e?e:0,condition:t.state}},p=()=>{let t=g(d.dashboardConfig.security.alarmEntityId);return t?.state||"unknown"},S=()=>{let t=_(t=>t.states);return d.dashboardConfig.persons.filter(e=>t[e.entityId]?.state==="home").length},w=t=>{let e=_(t=>t.states),a=t.filter(t=>t.startsWith("light.")).filter(t=>e[t]?.state==="on").length;return 0===a?"All off":1===a?"1 light on":`${a} lights on`},f=()=>{let t=_(t=>t.states),{energy:e}=d.dashboardConfig;return{solar:parseInt(t[e.solarEntityId]?.state||"0"),battery:parseInt(t[e.batteryLevelEntityId]?.state||"0"),batteryPower:parseInt(t[e.batteryEntityId]?.state||"0"),grid:parseInt(t[e.gridEntityId]?.state||"0"),house:parseInt(t[e.houseEntityId]?.state||"0")}},b=()=>_(t=>t.powerTrend),D=()=>_(t=>t.surveillanceEvents),I=()=>_(t=>t.surveillanceStats)},7863:(t,e,a)=>{"use strict";function n(t=new Date){return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1})}function i(t=new Date){return t.toLocaleDateString("en-US",{weekday:"long",day:"2-digit",month:"long"})}function r(t){let e=new Date(t),a=Math.floor((new Date().getTime()-e.getTime())/6e4),n=Math.floor(a/60);return a<1?"Just now":a<60?`${a}m ago`:n<24?`${n}h ago`:e.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function s(t){let e=new Date(t);return e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})+" • "+e.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function o(...t){return t.filter(Boolean).join(" ")}function l(t){return({sunny:"☀️","clear-night":"\uD83C\uDF19",partlycloudy:"⛅",cloudy:"☁️",rainy:"\uD83C\uDF27️",snowy:"❄️",fog:"\uD83C\uDF2B️",windy:"\uD83D\uDCA8",lightning:"⚡"})[t]||"\uD83C\uDF21️"}function d(t){return({disarmed:"Disarmed",armed_home:"Armed Home",armed_away:"Armed Away",armed_night:"Armed Night",arming:"Arming...",pending:"Pending",triggered:"TRIGGERED"})[t]||t}function c(t){return({walking:"\uD83D\uDEB6",running:"\uD83C\uDFC3",driving:"\uD83D\uDE97",cycling:"\uD83D\uDEB4",stationary:"\uD83E\uDDD8"})[t]||"\uD83D\uDCCD"}a.d(e,{$q:()=>s,SY:()=>r,X:()=>l,cn:()=>o,hW:()=>c,mr:()=>n,p6:()=>i,xs:()=>d})},1219:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>u,metadata:()=>g,viewport:()=>m});var n=a(9510);a(7272);var i=a(8570);let r=(0,i.createProxy)(String.raw`/home/runner/workspace/components/providers/ha-provider.tsx`),{__esModule:s,$$typeof:o}=r;r.default;let l=(0,i.createProxy)(String.raw`/home/runner/workspace/components/providers/ha-provider.tsx#HAProvider`),d=(0,i.createProxy)(String.raw`/home/runner/workspace/components/nav/bottom-nav.tsx`),{__esModule:c,$$typeof:_}=d;d.default;let h=(0,i.createProxy)(String.raw`/home/runner/workspace/components/nav/bottom-nav.tsx#BottomNav`),g={title:"HA Dashboard",description:"Mobile-first Home Assistant Dashboard",manifest:"/manifest.json",appleWebApp:{capable:!0,statusBarStyle:"black-translucent",title:"HA Dash"}},m={width:"device-width",initialScale:1,maximumScale:1,userScalable:!1,themeColor:"#0b0f1a"};function u({children:t}){return(0,n.jsxs)("html",{lang:"en",children:[n.jsx("head",{children:n.jsx("link",{rel:"apple-touch-icon",href:"/icon-192.png"})}),n.jsx("body",{className:"antialiased",children:(0,n.jsxs)(l,{children:[(0,n.jsxs)("div",{className:"flex min-h-screen",children:[n.jsx(y,{}),n.jsx("main",{className:"flex-1 pb-20 lg:pb-6 lg:pl-64",children:t})]}),n.jsx("div",{className:"lg:hidden",children:n.jsx(h,{})})]})})]})}function y(){return(0,n.jsxs)("aside",{className:"hidden lg:flex lg:flex-col lg:w-64 lg:fixed lg:inset-y-0 bg-bg-secondary border-r border-gray-800",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-gray-800",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-accent-cyan to-accent-green flex items-center justify-center",children:n.jsx("span",{className:"text-xl",children:"\uD83C\uDFE0"})}),(0,n.jsxs)("div",{children:[n.jsx("h1",{className:"font-bold text-white",children:"HA Dashboard"}),n.jsx("p",{className:"text-xs text-text-muted",children:"Home Assistant"})]})]}),(0,n.jsxs)("nav",{className:"flex-1 px-4 py-6 space-y-1",children:[n.jsx(p,{href:"/",icon:"\uD83C\uDFE0",label:"Home"}),n.jsx(p,{href:"/energy",icon:"⚡",label:"Energy"}),n.jsx(p,{href:"/cams",icon:"\uD83D\uDCF9",label:"Surveillance"}),n.jsx(p,{href:"/calendar",icon:"\uD83D\uDCC5",label:"Calendar"}),n.jsx(p,{href:"/secure",icon:"\uD83D\uDD12",label:"Security"}),n.jsx(p,{href:"/family",icon:"\uD83D\uDC68‍\uD83D\uDC69‍\uD83D\uDC67‍\uD83D\uDC66",label:"Family"}),n.jsx(p,{href:"/more",icon:"⚙️",label:"More"})]})]})}function p({href:t,icon:e,label:a}){return(0,n.jsxs)("a",{href:t,className:"flex items-center gap-3 px-4 py-3 rounded-xl text-text-secondary hover:bg-bg-card hover:text-white transition-colors",children:[n.jsx("span",{className:"text-xl",children:e}),n.jsx("span",{className:"font-medium",children:a})]})}},7272:()=>{}};